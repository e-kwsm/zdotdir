#compdef black

# black, 23.3.0

typeset -a specs=(
  '(-l --line-length)'{-l,--line-length}'[How many characters per line to allow.]:INTEGER:_values INTEGER 79 88'
  '(--ipynb)'--pyi'[Format all input files like typing stubs regardless of file extension (useful when piping source on standard input).]'
  '(--pyi)'--ipynb'[Format all input files like Jupyter Notebooks regardless of file extension (useful when piping source on standard input).]'
  '(-S --skip-string-normalization)'{-S,--skip-string-normalization}"[Don't normalize string quotes or prefixes.]"
  '(-C --skip-magic-trailing-comma)'{-C,--skip-magic-trailing-comma}"[Don't use trailing commas as a reason to split lines.]"
  --preview"[Enable potentially disruptive style changes that may be added to Black's main functionality in the next major release.]"
  '(--diff)'--check"[Don't write the files back, just return the status.]"
  '(--safe)'--fast'[skip temporary sanity checks.]'
  '(--fast)'--safe'[enable temporary sanity checks.]'
  '(--check)'--diff"[Don't write the files back, just output a diff for each file on stdout.]"
  '(-W --workers)'{-W,--workers}'[Number of parallel workers]:INTEGER RANGE:_values "INTEGER RANGE" 1 "$(nproc --all)"'
  '(-q --quiet)'{-q,--quiet}"[Don't emit non-error messages to stderr.]"
  '(-v --verbose)'{-v,--verbose}'[Also emit messages to stderr about files that were not changed or were ignored due to exclusion patterns.]'
  '(- *)'--version'[Show the version and exit.]'
  --config'[Read configuration from FILE path.]:FILE:_files'
  '(- *)'{-h,--help}'[Show this message and exit.]'
  '*:files:_files -g "*.py"'
)
_arguments "${(@)specs}"

return

: << EOF
Usage: black [OPTIONS] SRC ...

  The uncompromising code formatter.

Options:
  -c, --code TEXT                 Format the code passed in as a string.
  -l, --line-length INTEGER       How many characters per line to allow.
                                  [default: 88]
  -t, --target-version [py33|py34|py35|py36|py37|py38|py39|py310|py311]
                                  Python versions that should be supported by
                                  Black's output. By default, Black will try
                                  to infer this from the project metadata in
                                  pyproject.toml. If this does not yield
                                  conclusive results, Black will use per-file
                                  auto-detection.
  --pyi                           Format all input files like typing stubs
                                  regardless of file extension (useful when
                                  piping source on standard input).
  --ipynb                         Format all input files like Jupyter
                                  Notebooks regardless of file extension
                                  (useful when piping source on standard
                                  input).
  --python-cell-magics TEXT       When processing Jupyter Notebooks, add the
                                  given magic to the list of known python-
                                  magics (capture, prun, pypy, python,
                                  python3, time, timeit). Useful for
                                  formatting cells with custom python magics.
  -x, --skip-source-first-line    Skip the first line of the source code.
  -S, --skip-string-normalization
                                  Don't normalize string quotes or prefixes.
  -C, --skip-magic-trailing-comma
                                  Don't use trailing commas as a reason to
                                  split lines.
  --preview                       Enable potentially disruptive style changes
                                  that may be added to Black's main
                                  functionality in the next major release.
  --check                         Don't write the files back, just return the
                                  status. Return code 0 means nothing would
                                  change. Return code 1 means some files would
                                  be reformatted. Return code 123 means there
                                  was an internal error.
  --diff                          Don't write the files back, just output a
                                  diff for each file on stdout.
  --color / --no-color            Show colored diff. Only applies when
                                  `--diff` is given.
  --fast / --safe                 If --fast given, skip temporary sanity
                                  checks. [default: --safe]
  --required-version TEXT         Require a specific version of Black to be
                                  running (useful for unifying results across
                                  many environments e.g. with a pyproject.toml
                                  file). It can be either a major version
                                  number or an exact version.
  --include TEXT                  A regular expression that matches files and
                                  directories that should be included on
                                  recursive searches. An empty value means all
                                  files are included regardless of the name.
                                  Use forward slashes for directories on all
                                  platforms (Windows, too). Exclusions are
                                  calculated first, inclusions later.
                                  [default: (\.pyi?|\.ipynb)$]
  --exclude TEXT                  A regular expression that matches files and
                                  directories that should be excluded on
                                  recursive searches. An empty value means no
                                  paths are excluded. Use forward slashes for
                                  directories on all platforms (Windows, too).
                                  Exclusions are calculated first, inclusions
                                  later. [default: /(\.direnv|\.eggs|\.git|\.h
                                  g|\.mypy_cache|\.nox|\.tox|\.venv|venv|\.svn
                                  |\.ipynb_checkpoints|_build|buck-
                                  out|build|dist|__pypackages__)/]
  --extend-exclude TEXT           Like --exclude, but adds additional files
                                  and directories on top of the excluded ones.
                                  (Useful if you simply want to add to the
                                  default)
  --force-exclude TEXT            Like --exclude, but files and directories
                                  matching this regex will be excluded even
                                  when they are passed explicitly as
                                  arguments.
  --stdin-filename TEXT           The name of the file when passing it through
                                  stdin. Useful to make sure Black will
                                  respect --force-exclude option on some
                                  editors that rely on using stdin.
  -W, --workers INTEGER RANGE     Number of parallel workers [default: number
                                  of CPUs in the system]  [x>=1]
  -q, --quiet                     Don't emit non-error messages to stderr.
                                  Errors are still emitted; silence those with
                                  2>/dev/null.
  -v, --verbose                   Also emit messages to stderr about files
                                  that were not changed or were ignored due to
                                  exclusion patterns.
  --version                       Show the version and exit.
  --config FILE                   Read configuration from FILE path.
  -h, --help                      Show this message and exit.
EOF

# vim:ft=zsh
